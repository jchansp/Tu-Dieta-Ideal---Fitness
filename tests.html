<html>

<head>
    <script>
        (function () {
            'use strict';

            var assert = function (unitTest, comparison) {
                document.writeln('<tr>');
                document.writeln('<td>' + unitTest + '</td>');
                document.writeln('<td>' + (eval(comparison) ? '<span style="color:blue">OK</span>' : '<span style="color:red">KO</span>') + '</td>');
                document.writeln('</tr>');
            };

            function areEqual(object1, object2) {
                return JSON.stringify(object1) === JSON.stringify(object2);
            };

            window.User = {};
            User.BLL = function (_User) {
                /**
                 * Private functions
                 */
                var isArray = function (array) {
                    return Object.prototype.toString.call(array) === '[object Array]';
                };
                var isDate = function (date) {
                    return Object.prototype.toString.call(date) === '[object Date]';
                };
                var isNumber = function (number) {
                    return Object.prototype.toString.call(number) === '[object Number]';
                };
                var isString = function (string) {
                    return Object.prototype.toString.call(string) === '[object String]';
                };
                /**
                 * Getters & Setters
                 */
                this.__defineGetter__('dateOfBirth', function () {
                    return _User.dateOfBirth;
                });
                this.__defineSetter__('dateOfBirth', function (dateOfBirth) {
                    if (!isDate(_User.dateOfBirth))
                        throw new TypeError('dateOfBirth has to be a Date');
                });
                this.__defineGetter__('height', function () {
                    return _User.height;
                });
                this.__defineSetter__('height', function (height) {
                    if (!isNumber(_User.height))
                        throw new TypeError('height has to be a Number');
                });
                this.__defineGetter__('name', function () {
                    return _User.name;
                });
                this.__defineSetter__('name', function (name) {
                    if (!isString(_User.name))
                        throw new TypeError('name has to be a String');
                });
                this.__defineGetter__('physicalActivity', function () {
                    return _User.physicalActivity;
                });
                this.__defineSetter__('physicalActivity', function (physicalActivity) {
                    if (!isNumber(_User.physicalActivity))
                        throw new TypeError('physicalActivity∫ has to be a Number');
                });
                this.__defineGetter__('sex', function () {
                    return _User.sex;
                });
                this.__defineSetter__('sex', function (sex) {
                    if (!isString(_User.sex))
                        throw new TypeError('sex has to be a String');
                });
                this.__defineGetter__('weights', function () {
                    return _User.weights;
                });
                this.__defineSetter__('weights', function (weights) {
                    if (!isArray(_User.weights))
                        throw new TypeError('weights has to be an Array');
                });
                /**
                 * Constructor
                 */
                this.dateOfBirth = _User.dateOfBirth;
                this.height = _User.height;
                this.name = _User.name;
                this.physicalActivity = _User.physicalActivity;
                this.sex = _User.sex;
                this.weights = _User.weights;
            };

            /*User.DAL = function (dateOfBirth,
                height,
                name,
                physicalActivity,
                sex,
                weights) {
                this.dateOfBirth = isDate(dateOfBirth) ? dateOfBirth : undefined;
                this.height = isNumber(height) ? height : undefined;
                this.name = isString(name) ? name : undefined;
                this.physicalActivity = isNumber(physicalActivity) ? physicalActivity : undefined;
                this.sex = isString(sex) ? sex : undefined;
                this.weights = isArray(weights) ? weights : undefined;
            };*/

            window.addEventListener('load', function () {

                localStorage.clear();
                document.writeln('<table>');
                document.writeln('<tr>');
                document.writeln('<th colspan=2>User.BLL.Getters</th>');
                document.writeln('</tr>');
                window.userBll = new User.BLL({
                    dateOfBirth: new Date(1981, 10 - 1, 7),
                    height: 1.86,
                    name: 'Jesús',
                    physicalActivity: 1,
                    sex: 'Masculino',
                    weights: [{
                        id: 1,
                        date: new Date(2014, 1 - 1, 1),
                        weight: 82.2
                    }]
                });
                assert("dateOfBirth = 7/10/81", "areEqual(userBll.dateOfBirth, new Date(1981, 10 - 1, 7))");
                assert("height = 1.86;", "areEqual(userBll.height, 1.86)");
                assert("name = Jesús;", "areEqual(userBll.name, 'Jesús')");
                assert("physicalActivity = 'Jesús'", "areEqual(userBll.physicalActivity, 1)");
                assert("sex = 'Masculino'", "areEqual(userBll.sex, 'Masculino')");
                assert("weights = [{id: 1, date: 1/1/2014, weight: 82.2}]", "areEqual(userBll.weights, [{id: 1, date: new Date(2014, 1 - 1, 1), weight: 82.2}])");
                document.writeln('</table>');
            });
        })();
    </script>
</head>

<body>
</body>

</html>